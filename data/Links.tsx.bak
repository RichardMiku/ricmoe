import { ReactNode } from "react";

export const LinksTagsSwitch : boolean = true;

export const links: LinksProps[] = [
    {
        name: "Newbe36524",
        description: "Now, everyone will be excellent!",
        avatarUrl: "/img/Links/friends/newbe36524.svg",
        url: "https://newbe.pro",
        tags: ["friends"],
        category: "friends",
        addedDate: "2024-01-15",
        status: "active"
    },
    {
        name:"New Year Countdown",
        description: "A simple countdown to the new year.",
        avatarUrl: "https://images.unsplash.com/photo-1467810563316-b5476525c0f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1349&q=80",
        url: "https://new.ricpro.link",
        tags: ["toys", "countdown"],
        category: "toys",
        addedDate: "2024-02-01",
        status: "active"
    },
    {
        name: "Docusaurus",
        description: "ä¸€ä¸ªç”¨äºŽè½»æ¾æž„å»ºã€éƒ¨ç½²å’Œç»´æŠ¤å¼€æºé¡¹ç›®ç½‘ç«™çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ã€‚",
        avatarUrl: "/img/docusaurus.png",
        url: "https://docusaurus.io/",
        tags: ["tools", "documentation"],
        category: "tools", 
        addedDate: "2024-01-10",
        status: "active"
    },
    {
        name: "GitHub",
        description: "å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°å’Œå¼€å‘è€…ç¤¾åŒºã€‚",
        avatarUrl: "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
        url: "https://github.com",
        tags: ["tools", "development"],
        category: "tools",
        addedDate: "2024-01-05",
        status: "active"
    },
    {
        name: "MDN Web Docs",
        description: "Mozilla ç»´æŠ¤çš„ Web å¼€å‘æ–‡æ¡£å’Œå­¦ä¹ èµ„æºã€‚",
        avatarUrl: "https://developer.mozilla.org/favicon-48x48.cbbd161b5b.png",
        url: "https://developer.mozilla.org",
        tags: ["tools", "documentation", "learning"],
        category: "resources",
        addedDate: "2024-01-12",
        status: "active"
    },
    {
        name: "VS Code",
        description: "å¼ºå¤§çš„çŽ°ä»£ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€ã€‚",
        avatarUrl: "https://code.visualstudio.com/favicon.ico",
        url: "https://code.visualstudio.com",
        tags: ["tools", "editor"],
        category: "tools",
        addedDate: "2024-01-08",
        status: "active"
    }
]

export type LinksProps = {
    name: string;
    description: string;
    avatarUrl: string;
    url: string;
    imageUrl?: string;
    tags?: string[];
    category: string;
    addedDate: string;
    status: 'active' | 'inactive' | 'archived';
    rating?: number; // 1-5 stars
    author?: string; // who added this link
};

export type LinksTagProps = {
    tagId: string;
    tagName: string | ReactNode;
    tagDescription: string | ReactNode;
    color?: string;
    icon?: string;
};

export type LinksCategoryProps = {
    id: string;
    name: string;
    description: string;
    icon: string;
    color: string;
};

export const linkCategories: LinksCategoryProps[] = [
    {
        id: "friends",
        name: "æœ‹å‹ä»¬",
        description: "æˆ‘çš„æœ‹å‹ä»¬çš„ç½‘ç«™å’Œåšå®¢",
        icon: "ðŸ‘¥",
        color: "#ff6b6b"
    },
    {
        id: "tools",
        name: "å¼€å‘å·¥å…·",
        description: "å®žç”¨çš„å¼€å‘å·¥å…·å’ŒæœåŠ¡",
        icon: "ðŸ› ï¸",
        color: "#4ecdc4"
    },
    {
        id: "resources",
        name: "å­¦ä¹ èµ„æº",
        description: "ä¼˜è´¨çš„å­¦ä¹ å’Œå‚è€ƒèµ„æ–™",
        icon: "ðŸ“š",
        color: "#45b7d1"
    },
    {
        id: "toys",
        name: "æœ‰è¶£é¡¹ç›®",
        description: "æœ‰è¶£çš„å°é¡¹ç›®å’Œåˆ›æ„ä½œå“",
        icon: "ðŸŽ®",
        color: "#96ceb4"
    }
];

export const linkTags: LinksTagProps[] = [
    {
        tagId: "friends",
        tagName: "ðŸª¶Friends",
        tagDescription: "Links of Friends",
        color: "#ff6b6b",
        icon: "ðŸ‘¥"
    },
    {
        tagId: "tools",
        tagName: "ðŸ› ï¸Tools",
        tagDescription: "Development Tools",
        color: "#4ecdc4",
        icon: "ðŸ› ï¸"
    },
    {
        tagId: "toys",
        tagName: "ðŸŽ®Toys",
        tagDescription: "Fun Projects",
        color: "#96ceb4",
        icon: "ðŸŽ®"
    },
    {
        tagId: "documentation",
        tagName: "ðŸ“–Documentation",
        tagDescription: "Documentation and Guides",
        color: "#feca57",
        icon: "ðŸ“–"
    },
    {
        tagId: "learning",
        tagName: "ðŸŽ“Learning",
        tagDescription: "Learning Resources",
        color: "#45b7d1",
        icon: "ðŸŽ“"
    },
    {
        tagId: "development",
        tagName: "ï¿½Development",
        tagDescription: "Development Related",
        color: "#6c5ce7",
        icon: "ðŸ’»"
    }
]

// å·¥å…·å‡½æ•°ï¼šæŒ‰åˆ†ç±»è¿‡æ»¤é“¾æŽ¥
export const getLinksByCategory = (category: string) => {
    if (category === 'all') {
        return links;
    }
    return links.filter(link => link.category === category);
};

// å·¥å…·å‡½æ•°ï¼šæŒ‰æ ‡ç­¾è¿‡æ»¤é“¾æŽ¥
export const getLinksByTag = (tag: string) => {
    return links.filter(link => 
        link.tags && link.tags.includes(tag)
    );
};

// å·¥å…·å‡½æ•°ï¼šæŒ‰çŠ¶æ€è¿‡æ»¤é“¾æŽ¥
export const getLinksByStatus = (status: string) => {
    if (status === 'all') {
        return links;
    }
    return links.filter(link => link.status === status);
};

// å·¥å…·å‡½æ•°ï¼šæŒ‰æ—¥æœŸæŽ’åºé“¾æŽ¥
export const sortLinksByDate = (links: LinksProps[], order: 'asc' | 'desc' = 'desc') => {
    return [...links].sort((a, b) => {
        const dateA = new Date(a.addedDate).getTime();
        const dateB = new Date(b.addedDate).getTime();
        return order === 'desc' ? dateB - dateA : dateA - dateB;
    });
};

// å·¥å…·å‡½æ•°ï¼šæŒ‰åç§°æŽ’åºé“¾æŽ¥
export const sortLinksByName = (links: LinksProps[], order: 'asc' | 'desc' = 'asc') => {
    return [...links].sort((a, b) => {
        return order === 'asc' 
            ? a.name.localeCompare(b.name)
            : b.name.localeCompare(a.name);
    });
};

// å·¥å…·å‡½æ•°ï¼šèŽ·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯
export const getCategoryStats = () => {
    return linkCategories.map(category => ({
        ...category,
        count: getLinksByCategory(category.id).length,
        percentage: ((getLinksByCategory(category.id).length / links.length) * 100).toFixed(1)
    }));
};

// å·¥å…·å‡½æ•°ï¼šèŽ·å–æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯
export const getTagStats = () => {
    const tagMap = new Map<string, number>();
    links.forEach(link => {
        if (link.tags) {
            link.tags.forEach(tag => {
                tagMap.set(tag, (tagMap.get(tag) || 0) + 1);
            });
        }
    });
    
    return Array.from(tagMap.entries())
        .map(([tag, count]) => ({ tag, count }))
        .sort((a, b) => b.count - a.count);
};

// å·¥å…·å‡½æ•°ï¼šèŽ·å–åˆ†ç±»é…ç½®
export const getCategoryConfig = (categoryId: string) => {
    return linkCategories.find(category => category.id === categoryId);
};

// å·¥å…·å‡½æ•°ï¼šèŽ·å–æ ‡ç­¾é…ç½®
export const getTagConfig = (tagId: string) => {
    return linkTags.find(tag => tag.tagId === tagId);
};